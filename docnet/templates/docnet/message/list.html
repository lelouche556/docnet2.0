{% extends "base.html" %}
{% load app_filters %}
{% block title %}View Messages{% endblock %}
{% block sidebar_message %}active{% endblock %}
{% block body_header %}View Messages{% endblock %}
{% block body %}
    <div class="row">
        <div class="col-sm-9">
            <p class="lead">View all messages.</p>
        </div>
        <div class="col-sm-3">
            <a class="btn btn-success" href="/message/new/" role="button">New message</a>
        </div>
    </div>
    <table class="table table-striped">
        <thead>
            <th><a href="./?sort=to">To</a></th>
            <th><a href="./?sort=from">From</a></th>
            <th><a href="./?sort=subject">Subject</a></th>
            <th><a href="./?sort=time">Timestamp</a></th>
            <th><a href="./?sort=read">Read</a></th>
            <th>Options</th>
        </thead>
        {% for message in query %}
            <tr>
                <td>{{ message.target.profile }}</td>
                <td>{{ message.sender.profile }}</td>
                <td>{{ message.header }}</td>
                <td>{{ message.timestamp }}</td>
                <td>{{ message.read }}</td>
                <td><a class="btn btn-primary" href="/message/read/?pk={{ message.pk }}" role="button">Read</a></td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}